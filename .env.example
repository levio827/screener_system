# ============================================================================
# Stock Screening Platform - Environment Variables
# ============================================================================
# Copy this file to .env and update with your actual values
# DO NOT commit .env to version control!
# ============================================================================

# ============================================================================
# GENERAL
# ============================================================================

ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# ============================================================================
# DATABASE (PostgreSQL + TimescaleDB)
# ============================================================================

DB_HOST=localhost
DB_PORT=5432
DB_NAME=screener_db
DB_USER=screener_user
DB_PASSWORD=your_secure_password_here

# Full connection string (alternative to individual vars)
# Use postgresql+asyncpg for async SQLAlchemy
DATABASE_URL=postgresql+asyncpg://screener_user:your_secure_password_here@localhost:5432/screener_db

# ============================================================================
# REDIS CACHE
# ============================================================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here
REDIS_URL=redis://:your_redis_password_here@localhost:6379/0

# ============================================================================
# BACKEND API (FastAPI)
# ============================================================================

BACKEND_PORT=8000
API_BASE_URL=http://localhost:8000

# JWT Authentication
SECRET_KEY=your-super-secret-key-min-32-chars-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=30

# CORS
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# Rate Limiting (requests per minute)
RATE_LIMIT_FREE=100
RATE_LIMIT_BASIC=500
RATE_LIMIT_PRO=2000

# ============================================================================
# FRONTEND (React/Vite)
# ============================================================================

FRONTEND_PORT=5173
VITE_API_BASE_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:8000/ws

# ============================================================================
# DATA PIPELINE (Apache Airflow)
# ============================================================================

AIRFLOW_PORT=8080
AIRFLOW_USER=admin
AIRFLOW_PASSWORD=admin
AIRFLOW_FERNET_KEY=your-fernet-key-here-generate-with-python-cryptography-fernet
AIRFLOW_SECRET_KEY=your-airflow-secret-key-here

# Airflow Database (uses same PostgreSQL instance)
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql://screener_user:your_secure_password_here@localhost:5432/airflow

# ============================================================================
# CELERY (Background Tasks)
# ============================================================================

CELERY_BROKER_URL=redis://:your_redis_password_here@localhost:6379/1
CELERY_RESULT_BACKEND=redis://:your_redis_password_here@localhost:6379/2
CELERY_CONCURRENCY=4

# ============================================================================
# EXTERNAL DATA SOURCES
# ============================================================================

# Korea Exchange (KRX) API
KRX_API_KEY=your_krx_api_key_here
KRX_API_URL=https://api.krx.co.kr

# F&Guide Financial Data API
FGUIDE_API_KEY=your_fguide_api_key_here
FGUIDE_API_URL=https://api.fguide.com

# ============================================================================
# MONITORING & LOGGING
# ============================================================================

# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_PORT=3001
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# Sentry (Error Tracking)
SENTRY_DSN=https://your-sentry-dsn-here@sentry.io/project-id
SENTRY_ENVIRONMENT=development

# ============================================================================
# EMAIL NOTIFICATIONS
# ============================================================================

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=alerts@screener.kr
SMTP_PASSWORD=your_app_password_here
SMTP_FROM=alerts@screener.kr

# ============================================================================
# PAYMENT GATEWAY
# ============================================================================

# Stripe (or local payment provider)
STRIPE_PUBLIC_KEY=pk_test_your_stripe_public_key_here
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# ============================================================================
# CLOUD STORAGE (Optional)
# ============================================================================

# AWS S3 (for data backups, exports)
AWS_ACCESS_KEY_ID=your_aws_access_key_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_key_here
AWS_REGION=ap-northeast-2
AWS_S3_BUCKET=screener-data-backups

# ============================================================================
# NGINX (Reverse Proxy)
# ============================================================================

NGINX_PORT=80
NGINX_SSL_PORT=443

# ============================================================================
# TESTING
# ============================================================================

# Test Database
TEST_DATABASE_URL=postgresql://screener_user:test_password@localhost:5432/screener_test_db

# ============================================================================
# FEATURE FLAGS
# ============================================================================

ENABLE_SOCIAL_LOGIN=false
ENABLE_BACKTESTING=false
ENABLE_API_ACCESS=false
ENABLE_MOBILE_APP=false

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Database connection pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# Cache TTL (seconds)
CACHE_TTL_HOT_STOCKS=300
CACHE_TTL_STOCK_DETAIL=3600
CACHE_TTL_SCREENING=600

# ============================================================================
# NOTES
# ============================================================================

# Generate secure keys:
# - SECRET_KEY: openssl rand -hex 32
# - AIRFLOW_FERNET_KEY: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# - Redis password: openssl rand -base64 32

# For production, use a secrets management service (AWS Secrets Manager, HashiCorp Vault, etc.)
