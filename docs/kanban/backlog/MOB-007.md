# MOB-007: App Store Submission

## Metadata

| Field | Value |
|-------|-------|
| **ID** | MOB-007 |
| **Title** | Prepare and Submit to App Stores |
| **Type** | Release |
| **Status** | BACKLOG |
| **Priority** | P1 (High) |
| **Estimate** | 12 hours |
| **Sprint** | Sprint 8 |
| **Epic** | Mobile Application |
| **Assignee** | TBD |
| **Depends On** | MOB-001, MOB-002, MOB-003, MOB-004, MOB-005, MOB-006 |
| **Created** | 2025-11-29 |
| **Tags** | #mobile #release #app-store #play-store #submission |

## Description

Prepare the mobile application for submission to iOS App Store and Google Play Store. This includes creating all required visual assets, writing store listings, setting up legal pages, configuring app metadata, conducting internal testing, and managing the review process. The goal is to successfully publish the app on both platforms with a polished, professional presentation.

## Subtasks

### Visual Assets Creation
- [ ] App Icon design
  - [ ] iOS icon (1024x1024 without alpha)
  - [ ] iOS icon variants (all required sizes via Asset Catalog)
  - [ ] Android adaptive icon (foreground + background)
  - [ ] Android legacy icon
  - [ ] Rounded corners variant
- [ ] Splash Screen
  - [ ] iOS splash screen
  - [ ] Android splash screen
  - [ ] Animated splash (optional)
- [ ] Screenshots
  - [ ] iPhone 6.9" (1320x2868 or 1290x2796)
  - [ ] iPhone 6.5" (1284x2778 or 1242x2688)
  - [ ] iPhone 5.5" (1242x2208)
  - [ ] iPad Pro 12.9" (2048x2732)
  - [ ] Android Phone (various resolutions)
  - [ ] Android Tablet (optional)
  - [ ] Screenshots for all key screens (5-10 per device)
- [ ] Promotional images
  - [ ] Feature graphic for Play Store (1024x500)
  - [ ] Promotional video (optional, 15-30 seconds)
  - [ ] TV banner (if applicable)

### Store Listing Content
- [ ] Korean metadata
  - [ ] App name (30 characters max)
  - [ ] Subtitle (iOS, 30 characters)
  - [ ] Short description (Play Store, 80 characters)
  - [ ] Full description (4000 characters)
  - [ ] Keywords (iOS, 100 characters)
  - [ ] Promotional text (iOS, 170 characters)
  - [ ] What's New text
- [ ] English metadata
  - [ ] Same content translated professionally
  - [ ] Market-appropriate keywords
- [ ] Category selection
  - [ ] Primary: Finance
  - [ ] Secondary: Business (optional)
- [ ] Age rating questionnaire
  - [ ] Content ratings for both platforms
  - [ ] IARC rating (Play Store)

### Legal Pages
- [ ] Privacy Policy page
  - [ ] Data collection disclosure
  - [ ] Data usage explanation
  - [ ] Third-party services list
  - [ ] User rights (GDPR, CCPA)
  - [ ] Contact information
  - [ ] Host on accessible URL
- [ ] Terms of Service page
  - [ ] User agreement
  - [ ] Service limitations
  - [ ] Disclaimer for financial information
  - [ ] Intellectual property
  - [ ] Account termination policy
- [ ] Data Deletion instructions
  - [ ] How to request account deletion
  - [ ] Data retention policy
  - [ ] Required for Play Store

### App Store Connect Setup (iOS)
- [ ] Create App Store Connect record
  - [ ] Bundle ID verification
  - [ ] SKU assignment
  - [ ] Primary language selection
- [ ] Configure App Information
  - [ ] App name
  - [ ] Privacy policy URL
  - [ ] App Store category
  - [ ] Age rating
  - [ ] Copyright
- [ ] Set up App Privacy
  - [ ] Data types collected
  - [ ] Data linked to user
  - [ ] Tracking disclosure
- [ ] Configure pricing
  - [ ] Free with in-app purchases (if applicable)
  - [ ] Subscription setup (if applicable)
- [ ] Set up TestFlight
  - [ ] Internal testing group
  - [ ] External testing group
  - [ ] Beta App Review submission

### Google Play Console Setup (Android)
- [ ] Create app in Play Console
  - [ ] Package name verification
  - [ ] Default language
  - [ ] App/Game selection
  - [ ] Free/Paid selection
- [ ] Store listing setup
  - [ ] Main store listing
  - [ ] Custom store listings (optional)
  - [ ] Store listing experiments (optional)
- [ ] Content rating questionnaire
  - [ ] Complete IARC questionnaire
  - [ ] Review rating result
- [ ] Configure app content
  - [ ] Target audience and content
  - [ ] News apps declaration (if applicable)
  - [ ] Financial services declaration
  - [ ] Government apps declaration
- [ ] Set up data safety
  - [ ] Data collection survey
  - [ ] Data sharing disclosure
  - [ ] Security practices
- [ ] Configure internal testing
  - [ ] Create internal test track
  - [ ] Add testers
  - [ ] Upload initial build

### Build and Signing Configuration
- [ ] iOS signing setup
  - [ ] Distribution certificate
  - [ ] App Store provisioning profile
  - [ ] Push notification entitlement
  - [ ] App Groups (if using widgets)
- [ ] Android signing setup
  - [ ] Generate upload key
  - [ ] Enable Play App Signing
  - [ ] Configure keystore in eas.json
- [ ] EAS Build configuration
  - [ ] Production build profile
  - [ ] Auto-submit configuration
  - [ ] Version/build number management

### Pre-submission Testing
- [ ] Internal testing
  - [ ] Full feature walkthrough
  - [ ] Edge case testing
  - [ ] Error handling verification
  - [ ] Performance testing
- [ ] Beta testing
  - [ ] TestFlight distribution
  - [ ] Play Store internal testing
  - [ ] Gather feedback
  - [ ] Fix critical issues
- [ ] Compliance testing
  - [ ] App Store guidelines check
  - [ ] Play Store policy check
  - [ ] Accessibility verification
  - [ ] Security review

### Submission Process
- [ ] iOS submission
  - [ ] Upload build via EAS
  - [ ] Complete App Store submission form
  - [ ] Submit for App Review
  - [ ] Respond to any rejections
- [ ] Android submission
  - [ ] Upload AAB via EAS
  - [ ] Complete Play Store listing
  - [ ] Create production release
  - [ ] Submit for review
  - [ ] Managed rollout (if applicable)

## Implementation Details

### App Store Metadata Template
```json
{
  "ios": {
    "name": "주식 스크리너",
    "subtitle": "한국 주식 종목 검색 분석",
    "keywords": "주식,스크리너,종목검색,투자,코스피,코스닥,재무분석,PER,PBR",
    "promotionalText": "새로운 가치주, 성장주를 손쉽게 찾아보세요!",
    "description": "주식 스크리너는 한국 주식 시장의 종목을 다양한 조건으로 검색하고 분석할 수 있는 앱입니다.\n\n주요 기능:\n• 다양한 필터로 종목 검색 (PER, PBR, 시가총액, 업종 등)\n• 실시간 주가 및 차트\n• 재무제표 분석\n• 포트폴리오 관리\n• 관심 종목 알림\n• 뉴스 및 공시 확인\n\n투자의 첫걸음, 주식 스크리너와 함께하세요!",
    "copyright": "© 2025 Stock Screener"
  },
  "android": {
    "title": "주식 스크리너 - 종목 검색 분석",
    "shortDescription": "한국 주식 종목 검색, 재무 분석, 포트폴리오 관리",
    "fullDescription": "..."
  }
}
```

### Privacy Policy Structure
```markdown
# Privacy Policy

Last updated: [Date]

## Information We Collect
- Account information (email, name)
- Portfolio data (stocks, quantities, prices)
- Usage data (screens viewed, features used)
- Device information (model, OS version)

## How We Use Your Information
- Provide and improve our services
- Send price alerts and notifications
- Analyze app usage patterns
- Personalize your experience

## Data Sharing
- We do not sell your personal data
- Third-party services: [List services]

## Your Rights
- Access your data
- Delete your account
- Export your data
- Opt-out of marketing

## Contact Us
- Email: privacy@screener.com
```

### EAS Submit Configuration
```json
{
  "submit": {
    "production": {
      "ios": {
        "appleId": "developer@screener.com",
        "ascAppId": "1234567890",
        "appleTeamId": "XXXXXXXXXX"
      },
      "android": {
        "serviceAccountKeyPath": "./play-store-credentials.json",
        "track": "production",
        "releaseStatus": "completed"
      }
    }
  }
}
```

### Build Script
```bash
#!/bin/bash
# scripts/build-production.sh

# Increment version
npm version patch

# Build for both platforms
eas build --platform all --profile production --non-interactive

# Submit to stores (optional auto-submit)
eas submit --platform ios --profile production
eas submit --platform android --profile production
```

### Screenshot Generation Script
```typescript
// scripts/generate-screenshots.ts
import { render } from '@testing-library/react-native';
import { captureScreen } from 'react-native-view-shot';

const SCREENSHOTS = [
  { name: 'home', screen: 'Home' },
  { name: 'screener', screen: 'Screener' },
  { name: 'stock-detail', screen: 'StockDetail', params: { code: '005930' } },
  { name: 'portfolio', screen: 'Portfolio' },
  { name: 'alerts', screen: 'Alerts' },
];

async function generateScreenshots() {
  for (const shot of SCREENSHOTS) {
    // Navigate to screen
    // Wait for data load
    // Capture screenshot
    const uri = await captureScreen({
      format: 'png',
      quality: 1,
      result: 'tmpfile',
    });
    // Save with appropriate name
  }
}
```

### Review Guidelines Checklist
```markdown
## App Store Review Guidelines Checklist

### 1. Safety
- [ ] No objectionable content
- [ ] User-generated content moderation (if applicable)
- [ ] No physical harm encouragement

### 2. Performance
- [ ] App is complete and functional
- [ ] No placeholder content
- [ ] Accurate app description
- [ ] No misleading screenshots

### 3. Business
- [ ] Accurate subscription information
- [ ] Clear in-app purchase descriptions
- [ ] No hidden costs

### 4. Design
- [ ] Human Interface Guidelines compliance
- [ ] No web view clones
- [ ] Proper use of system UI elements

### 5. Legal
- [ ] Privacy policy URL provided
- [ ] Data usage disclosed
- [ ] Terms of service accessible
- [ ] Financial disclaimer included

### 6. Financial Apps Specific
- [ ] Disclaimer: Not financial advice
- [ ] Data source attribution
- [ ] Real-time vs delayed data disclosure
```

## Acceptance Criteria

- [ ] App icon displays correctly on all device home screens
- [ ] Splash screen shows during app launch
- [ ] All screenshots are high quality and representative
- [ ] Store listing is complete in Korean and English
- [ ] Privacy policy is accessible and comprehensive
- [ ] Terms of service is accessible
- [ ] TestFlight build is available for testing
- [ ] Play Store internal testing is functional
- [ ] App passes App Store review
- [ ] App passes Play Store review
- [ ] App is live and downloadable on both stores
- [ ] Deep links work from store listings

## Testing Strategy

### Pre-submission Testing
- [ ] Full regression test on release build
- [ ] Test on multiple device sizes
- [ ] Test all features work in production environment
- [ ] Verify analytics and crash reporting
- [ ] Test in-app purchases (if applicable)

### Store Listing Testing
- [ ] Preview store listing appearance
- [ ] Test deep links from store
- [ ] Verify screenshots on all device sizes
- [ ] Check metadata character limits

### Post-submission Monitoring
- [ ] Monitor review status
- [ ] Prepare for potential rejection reasons
- [ ] Have backup answers ready for common questions

## Risk Assessment

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| App Store rejection | Medium | High | Thorough guideline review, beta testing |
| Play Store policy violation | Medium | High | Complete data safety form accurately |
| Missing required assets | Low | Medium | Use checklist, verify before submission |
| Incorrect metadata | Low | Medium | Multiple reviews, native speaker check |
| Certificate/signing issues | Medium | Medium | Test signing before submission |
| Long review times | Medium | Low | Submit early, plan for delays |

## Timeline

| Phase | Duration | Tasks |
|-------|----------|-------|
| Asset Creation | 3-4 days | Icons, screenshots, videos |
| Store Setup | 2-3 days | Metadata, legal pages, configuration |
| Internal Testing | 2-3 days | Beta testing, bug fixes |
| Submission | 1 day | Upload builds, submit for review |
| Review Period | 1-7 days (iOS), 1-3 days (Android) | Monitor and respond |
| **Total** | **10-18 days** | |

## Security Considerations

- [ ] Remove all debug code and logs
- [ ] Verify production API endpoints
- [ ] Check for hardcoded secrets
- [ ] Verify certificate pinning is enabled
- [ ] Test authentication flows
- [ ] Verify secure storage usage

## Dependencies

- **Depends On**: MOB-001 through MOB-006 (All features complete)
- **External**:
  - Apple Developer Program membership ($99/year)
  - Google Play Developer account ($25 one-time)
  - Designer for visual assets
  - Legal review for policies
  - Translation services (if needed)

## References

- [App Store Review Guidelines](https://developer.apple.com/app-store/review/guidelines/)
- [Google Play Policy Center](https://play.google.com/about/developer-content-policy/)
- [App Store Connect Help](https://developer.apple.com/help/app-store-connect/)
- [Google Play Console Help](https://support.google.com/googleplay/android-developer/)
- [EAS Submit](https://docs.expo.dev/submit/introduction/)
- [IMPROVEMENT_TICKETS.md](../../IMPROVEMENT_TICKETS.md) - Epic 3: Mobile Application

## Progress

- **0%** - Not started

## Notes

- Plan for 2-3 rejection rounds (common for financial apps)
- Consider soft launch in limited region first
- Prepare press kit for launch marketing
- Set up app analytics before launch
- Plan version 1.1 bug fix release
- Document common App Review questions and answers
- Consider App Store Optimization (ASO) after launch
- Schedule regular metadata updates for seasonal promotions
