# [FE-005] Order Book Visualization Component

## Metadata
- **Status**: TODO
- **Priority**: Medium
- **Assignee**: TBD
- **Estimated Time**: 12 hours
- **Sprint**: Sprint 2-3 (Week 4-5)
- **Tags**: #frontend #orderbook #visualization #real-time

## Description
Implement order book (호가) visualization component showing 10-level bid and ask prices with real-time updates. Essential for traders to see market depth.

## Subtasks
- [ ] Order Book Component
  - [ ] src/components/stock/OrderBook.tsx
  - [ ] Grid layout (ask on top, bid on bottom)
  - [ ] Color coding (red=ask, blue=bid)
  - [ ] Percentage bars for volume visualization
  - [ ] Highlight best bid/ask
- [ ] Data Structure
  - [ ] OrderBookData interface
  - [ ] Ask levels (price, volume, total) × 10
  - [ ] Bid levels (price, volume, total) × 10
  - [ ] Timestamp and stock code
- [ ] Real-time Updates
  - [ ] WebSocket subscription integration
  - [ ] Smooth animations on price changes
  - [ ] Flash effect on updated rows
  - [ ] Auto-scroll to best bid/ask
- [ ] Volume Visualization
  - [ ] Horizontal bars showing relative volume
  - [ ] Percentage calculation (vs max volume)
  - [ ] Cumulative volume display
  - [ ] Total buy/sell pressure indicator
- [ ] Price Spread Display
  - [ ] Calculate spread (best_ask - best_bid)
  - [ ] Show spread percentage
  - [ ] Mid-price calculation
  - [ ] Spread trend indicator
- [ ] Market Depth Chart
  - [ ] Area chart showing cumulative volume
  - [ ] X-axis: price
  - [ ] Y-axis: cumulative volume
  - [ ] Bid and ask areas
- [ ] UI Features
  - [ ] Toggle between simplified/detailed view
  - [ ] Freeze/unfreeze updates
  - [ ] Export to CSV
  - [ ] Tooltips with explanations
- [ ] Responsive Design
  - [ ] Desktop: full 10-level view
  - [ ] Tablet: 5-level view
  - [ ] Mobile: best bid/ask only

## Acceptance Criteria
- [ ] **Display**
  - [ ] Shows 10 levels of ask (매도)
  - [ ] Shows 10 levels of bid (매수)
  - [ ] Color coded (red/blue)
  - [ ] Numbers formatted correctly (commas, decimals)
- [ ] **Real-time Updates**
  - [ ] Updates within 100ms of price change
  - [ ] Smooth animations (no flickering)
  - [ ] Flash effect on changed rows
  - [ ] Timestamp shows last update
- [ ] **Volume Visualization**
  - [ ] Bars show relative volume
  - [ ] Total volume calculated correctly
  - [ ] Cumulative volume accurate
  - [ ] Buy/sell pressure indicator works
- [ ] **Spread**
  - [ ] Spread calculated correctly
  - [ ] Spread % accurate
  - [ ] Mid-price shows average
- [ ] **Performance**
  - [ ] Renders in < 100ms
  - [ ] No lag with rapid updates
  - [ ] Memory stable over time
  - [ ] Smooth on mobile devices
- [ ] **Usability**
  - [ ] Intuitive layout
  - [ ] Easy to read at a glance
  - [ ] Tooltips explain terms
  - [ ] Freeze button works
- [ ] **Accessibility**
  - [ ] Keyboard navigation
  - [ ] Screen reader support
  - [ ] High contrast mode
  - [ ] ARIA labels

## Dependencies
- **Depends on**: FE-001, BE-006, DP-004
- **Blocks**: None (optional feature)

## References
- **SDS.md**: Section 3.1.4 Order Book Component (to be added)
- **SRS.md**: REQ-UI-005 Order Book Display (to be added)
- [Order Book Design Patterns](https://www.tradingview.com/widget/advanced-chart/)
- [React Spring Animations](https://react-spring.io/)

## Progress
- **0%** - Not started

## Notes
- Order book is critical for day traders
- Consider using React Spring for smooth animations
- Use memo/useMemo to prevent unnecessary re-renders
- Implement virtual scrolling if showing more than 10 levels
- Add sound effects for large orders (optional)
- Consider adding order imbalance indicator
- Reference design: Upbit, Binance order books
- Test with high-frequency updates (100+ updates/sec)
