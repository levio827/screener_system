# [FE-011] Enhanced Navigation & Header System

## Metadata
- **Status**: TODO
- **Priority**: High
- **Assignee**: Frontend Team
- **Estimated Time**: 10 hours
- **Sprint**: Phase 2 Enhancement
- **Tags**: #frontend #navigation #ux #header
- **Dependencies**: FE-006, FE-007, FE-008, FE-009, FE-010

## Description
Redesign and enhance the application's navigation and header system to provide better usability, discoverability of features, and user experience. The current header only displays a title without any navigation menu, user profile, or quick actions.

## Current State
```tsx
// Current App.tsx - Minimal header
<header className="bg-white shadow-sm">
  <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
    <h1 className="text-2xl font-bold text-gray-900">
      Stock Screening Platform
    </h1>
  </div>
</header>
```

**Problems:**
- No navigation menu
- No user authentication status display
- No quick access to key features
- No branding/logo
- Missing search functionality
- No responsive mobile menu

## Proposed Solution
Build a comprehensive navigation system with:
1. Logo and branding
2. Main navigation menu
3. User profile dropdown
4. Global search
5. Quick actions
6. Mobile-responsive hamburger menu
7. Breadcrumb navigation (context-aware)

## Design Specifications

### Desktop Header (>1024px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] THE SCREENER        Nav Menu              User Menu  â”‚
â”‚        ìŠ¤í†¡ ìŠ¤í¬ë¦¬ë„ˆ       â–¼ Market â–¼ Tools      [ğŸ”] [@]  â”‚
â”‚                                                              â”‚
â”‚  Market:          Tools:           User Menu:               â”‚
â”‚  - Dashboard      - Screener       - Profile                â”‚
â”‚  - Market Overview- Watchlists     - Settings               â”‚
â”‚  - Sectors        - Compare        - Logout                 â”‚
â”‚                   - Alerts (ğŸ”œ)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Expanded view:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] THE SCREENER                                   [@] â–¼ â”‚
â”‚ â”œâ”€ Dashboard â”‚ Market â–¼â”‚ Tools â–¼â”‚ Screener  [ğŸ”Search...] â”‚ â”‚
â”‚ â”‚            â”‚         â”‚        â”‚                           â”‚
â”‚ â”‚  Market â–¼  â”‚         â”‚        â”‚                           â”‚
â”‚ â”‚  â”œâ”€ Overviewâ”‚        â”‚        â”‚                           â”‚
â”‚ â”‚  â”œâ”€ Sectorsâ”‚         â”‚        â”‚                           â”‚
â”‚ â”‚  â””â”€ Indicesâ”‚         â”‚        â”‚                           â”‚
â”‚ â”‚            â”‚         â”‚        â”‚                           â”‚
â”‚ â”‚  Tools â–¼   â”‚         â”‚        â”‚                           â”‚
â”‚ â”‚  â”œâ”€ Watchlists       â”‚        â”‚                           â”‚
â”‚ â”‚  â”œâ”€ Compare â”‚        â”‚        â”‚                           â”‚
â”‚ â”‚  â””â”€ Alerts (ğŸ”œ)      â”‚        â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile Header (<768px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â˜°] THE SCREENER      [@] â”‚
â”‚                            â”‚
â”‚ (When hamburger clicked)   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âœ• Close                â”‚ â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚ â”‚ Dashboard              â”‚ â”‚
â”‚ â”‚ Market Overview        â”‚ â”‚
â”‚ â”‚ Screener               â”‚ â”‚
â”‚ â”‚ Watchlists             â”‚ â”‚
â”‚ â”‚ Compare                â”‚ â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚ â”‚ Profile                â”‚ â”‚
â”‚ â”‚ Settings               â”‚ â”‚
â”‚ â”‚ Logout                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Global Search Component
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ”] Search stocks, sectors...          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

(When typing)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ”] samsung                      [Ã—]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ˆ Stocks                               â”‚
â”‚   005930 - Samsung Electronics          â”‚
â”‚   028260 - Samsung C&T                  â”‚
â”‚                                         â”‚
â”‚ ğŸ“Š Sectors                              â”‚
â”‚   Technology                            â”‚
â”‚   Semiconductors                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Feature Specifications

### 1. Main Navigation Menu
- **Dashboard**: User's personalized dashboard
- **Market** (Dropdown):
  - Market Overview
  - Sector Analysis
  - Market Indices
- **Screener**: Stock screening tool
- **Tools** (Dropdown):
  - Watchlists
  - Compare Stocks
  - Price Alerts (Coming Soon badge)
- **More** (Optional, for future features)

### 2. User Profile Dropdown
- User avatar (initials or photo)
- Username display
- Dropdown menu:
  - Profile & Settings
  - My Watchlists
  - Activity History
  - Help & Documentation
  - Logout

### 3. Global Search
- Autocomplete search for stocks
- Search by code or name
- Show recent searches
- Keyboard shortcuts (Cmd+K / Ctrl+K)
- Navigate to stock detail on select

### 4. Breadcrumb Navigation
- Context-aware breadcrumb trail
- Appears below header on detail pages
- Example: Home > Screener > Results
- Example: Home > Market > Sectors > Technology

### 5. Mobile Hamburger Menu
- Slide-out menu from left
- Full-screen overlay
- Touch-friendly spacing
- Close button and overlay click to close

## Subtasks

### Phase 1: Navigation Component Architecture (2 hours)
- [ ] Create Navigation component structure
- [ ] Design component hierarchy
  - [ ] Navbar (parent)
  - [ ] NavMenu (desktop menu)
  - [ ] MobileMenu (mobile hamburger)
  - [ ] UserMenu (user dropdown)
  - [ ] GlobalSearch (search component)
  - [ ] Breadcrumb (context nav)
- [ ] Define navigation configuration (routes, labels, icons)
- [ ] Set up responsive breakpoints

### Phase 2: Desktop Navigation (3 hours)
- [ ] Create Navbar component
  - [ ] Logo section
  - [ ] Main navigation links
  - [ ] Dropdown menus (Market, Tools)
  - [ ] Active route highlighting
- [ ] Implement UserMenu dropdown
  - [ ] User avatar component
  - [ ] Dropdown menu items
  - [ ] Logout functionality
- [ ] Add hover effects and transitions
- [ ] Implement keyboard navigation (Tab, Arrow keys)

### Phase 3: Mobile Navigation (2 hours)
- [ ] Create MobileMenu component
  - [ ] Hamburger icon button
  - [ ] Slide-out drawer
  - [ ] Full menu list
  - [ ] Close button
- [ ] Implement overlay backdrop
- [ ] Add touch gestures (swipe to close)
- [ ] Prevent body scroll when open
- [ ] Smooth open/close animations

### Phase 4: Global Search (3 hours)
- [ ] Create GlobalSearch component
- [ ] Implement autocomplete functionality
  - [ ] Debounced search API call
  - [ ] Dropdown results list
  - [ ] Keyboard navigation (up/down, enter)
  - [ ] Click to select
- [ ] Add search history (local storage)
- [ ] Implement keyboard shortcut (Cmd+K)
- [ ] Style search results
- [ ] Handle empty state and errors

### Phase 5: Breadcrumb Navigation (1 hour)
- [ ] Create Breadcrumb component
- [ ] Generate breadcrumb from route
- [ ] Add to relevant pages (stock detail, screener results)
- [ ] Implement click navigation
- [ ] Style with separators (/ or >)

### Phase 6: Integration & Testing (1 hour)
- [ ] Replace current header in App.tsx
- [ ] Test all navigation links
- [ ] Test responsive breakpoints
- [ ] Test keyboard navigation
- [ ] Test accessibility (screen readers)
- [ ] Unit tests for components
- [ ] E2E tests for navigation flows

## Acceptance Criteria
- [ ] Navigation menu shows all major features
- [ ] Active route is visually highlighted
- [ ] User menu displays user info correctly
- [ ] Logout functionality works
- [ ] Global search returns results in <500ms
- [ ] Keyboard shortcuts work (Cmd+K for search)
- [ ] Mobile menu slides in/out smoothly
- [ ] Navigation is fully responsive (mobile, tablet, desktop)
- [ ] All dropdowns close when clicking outside
- [ ] Breadcrumb appears on relevant pages
- [ ] No console errors or warnings
- [ ] Accessibility score >90 (Lighthouse)

## Technical Implementation

### New Components
```
src/components/navigation/
â”œâ”€â”€ Navbar.tsx                        # Main navigation bar
â”œâ”€â”€ NavMenu.tsx                       # Desktop navigation menu
â”œâ”€â”€ MobileMenu.tsx                    # Mobile hamburger menu
â”œâ”€â”€ UserMenu.tsx                      # User profile dropdown
â”œâ”€â”€ GlobalSearch.tsx                  # Search component
â”œâ”€â”€ Breadcrumb.tsx                    # Breadcrumb navigation
â”œâ”€â”€ NavLink.tsx                       # Navigation link component
â”œâ”€â”€ DropdownMenu.tsx                  # Reusable dropdown
â””â”€â”€ __tests__/
    â””â”€â”€ navigation.test.tsx           # Component tests
```

### Navigation Configuration
```typescript
// config/navigation.ts
export const navigationConfig = [
  {
    label: 'Dashboard',
    path: '/dashboard',
    icon: 'LayoutDashboard',
    auth: true,
  },
  {
    label: 'Market',
    icon: 'TrendingUp',
    children: [
      { label: 'Market Overview', path: '/market' },
      { label: 'Sector Analysis', path: '/market/sectors' },
      { label: 'Indices', path: '/market/indices' },
    ],
  },
  {
    label: 'Screener',
    path: '/screener',
    icon: 'Filter',
    auth: true,
  },
  {
    label: 'Tools',
    icon: 'Wrench',
    children: [
      { label: 'Watchlists', path: '/watchlists', auth: true },
      { label: 'Compare Stocks', path: '/compare' },
      { label: 'Price Alerts', path: '/alerts', badge: 'Coming Soon' },
    ],
  },
]
```

### Search Hook
```typescript
// hooks/useGlobalSearch.ts
export const useGlobalSearch = () => {
  const [query, setQuery] = useState('')
  const [results, setResults] = useState<SearchResult[]>([])
  const [isOpen, setIsOpen] = useState(false)

  const debouncedSearch = useDebouncedCallback(
    async (searchTerm: string) => {
      if (searchTerm.length < 2) return
      const data = await api.get(`/search?q=${searchTerm}`)
      setResults(data)
    },
    300
  )

  useEffect(() => {
    debouncedSearch(query)
  }, [query])

  return { query, setQuery, results, isOpen, setIsOpen }
}
```

### Keyboard Shortcut
```typescript
// hooks/useKeyboardShortcut.ts
export const useKeyboardShortcut = (
  key: string,
  callback: () => void,
  modifiers: ('ctrl' | 'cmd' | 'alt' | 'shift')[] = []
) => {
  useEffect(() => {
    const handler = (e: KeyboardEvent) => {
      const hasModifiers = modifiers.every((mod) => {
        if (mod === 'ctrl') return e.ctrlKey
        if (mod === 'cmd') return e.metaKey
        if (mod === 'alt') return e.altKey
        if (mod === 'shift') return e.shiftKey
        return false
      })

      if (hasModifiers && e.key === key) {
        e.preventDefault()
        callback()
      }
    }

    document.addEventListener('keydown', handler)
    return () => document.removeEventListener('keydown', handler)
  }, [key, callback, modifiers])
}
```

### Update App.tsx
```tsx
// App.tsx
import Navbar from '@/components/navigation/Navbar'

function App() {
  return (
    <div className="min-h-screen bg-gray-50">
      <Navbar />
      <main>
        <Outlet />
      </main>
    </div>
  )
}
```

## Dependencies
- **Pages**:
  - FE-006: Enhanced landing page
  - FE-007: Dashboard page
  - FE-008: Watchlist feature
  - FE-009: Market overview page
  - FE-010: Stock comparison tool
- **Icons**: Lucide React or Heroicons
- **UI**: Radix UI Dropdown Menu
- **Animations**: Framer Motion (optional, for smooth transitions)

## References
- **Current**: App.tsx (basic header)
- **Existing**: ProtectedRoute (auth logic)
- Inspiration:
  - [TradingView Navigation](https://www.tradingview.com/)
  - [Notion Navigation](https://www.notion.so/)
  - [Linear Navigation](https://linear.app/)

## Progress
- **0%** - Not started

## Notes
- Use semantic HTML (`<nav>`, `<header>`) for accessibility
- Implement focus trap in mobile menu
- Add skip-to-content link for screen readers
- Consider sticky header on scroll
- Logo should link to appropriate page (logged in â†’ dashboard, guest â†’ home)
- Active route highlighting should work with nested routes
- Search should support keyboard navigation (arrow keys, enter, escape)
- Consider adding notifications icon (for future price alerts)
- Mobile menu should close on route change
- Dropdown menus should close on route change

## Performance Considerations
- Lazy load GlobalSearch component
- Debounce search input (300ms)
- Use React.memo for navigation components
- Minimize re-renders on route changes
- Optimize icon imports (tree-shaking)

## Accessibility
- All interactive elements keyboard accessible
- Proper ARIA labels for dropdowns and buttons
- Focus visible indicators
- Screen reader announcements for menu state changes
- Color contrast compliance (WCAG AA)

## Future Enhancements (Post-MVP)
- [ ] Notification bell for alerts
- [ ] Theme toggle (dark/light mode)
- [ ] Language selector (i18n)
- [ ] Recently viewed stocks in search
- [ ] Trending searches
- [ ] Quick actions menu (Cmd+K command palette)
- [ ] Customizable navigation (user preferences)

## Impact
- **Discoverability**: Users easily find all features
- **Usability**: Faster navigation between pages
- **Professionalism**: Polished UI increases trust
- **Efficiency**: Global search saves time
- **Mobile UX**: Better experience on mobile devices

## Next Steps
After completion:
- Monitor navigation analytics (most used menu items)
- Gather feedback on search functionality
- Consider adding more quick actions
- Implement notification system for alerts
